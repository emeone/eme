<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>æœ­å¹Œ å‡ºç”£æº–å‚™ã‚¬ã‚¤ãƒ‰ | 24028ã‚¹ã‚¿ã‚¤ãƒ«</title>
  <meta name="theme-color" content="#ff5c8a"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=Rounded+Mplus+1c:wght@500;700;800&display=swap" rel="stylesheet"/>
  <style>
    :root{
      --pink:#ff5c8a;        /* ã‚³ãƒ¼ãƒ©ãƒ«ãƒ”ãƒ³ã‚¯ï¼ˆã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼‰ */
      --pink-2:#ff7aa3;      /* æ˜ã‚‹ã„ãƒ”ãƒ³ã‚¯ */
      --red:#ff3366;         /* å¼·èª¿ */
      --yellow:#ffd54d;      /* æ³¨æ„ */
      --mint:#34c6a1;        /* æˆåŠŸ */
      --ink:#333;            /* æœ¬æ–‡ */
      --ink-2:#666;          /* è£œåŠ© */
      --ink-3:#999;          /* èª¬æ˜ */
      --line:#eee;           /* æ ç·š */
      --bg:#fff;             /* èƒŒæ™¯ */
      --card:#fff;           /* ã‚«ãƒ¼ãƒ‰ */
      --pill:#fafafa;        /* ãƒ”ãƒ« */
      --radius:16px;         /* ã‚«ãƒ¼ãƒ‰è§’ */
      --shadow:0 8px 24px rgba(0,0,0,.06);
      --focus:0 0 0 3px rgba(255,92,138,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:'Noto Sans JP', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color:var(--ink); background:var(--bg)}

    /* ======= Top Headerï¼ˆ24028é¢¨ï¼šç™½åœ°Ã—æ¤œç´¢Ã—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰ ======= */
    .head{position:sticky; top:0; z-index:40; background:#fff; border-bottom:1px solid var(--line)}
    .head .wrap{max-width:1200px; margin:0 auto; padding:10px 16px; display:flex; align-items:center; gap:12px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.02em}
    .brand .logo{width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg, var(--pink), var(--pink-2)); box-shadow:0 4px 12px rgba(255,92,138,.25)}
    .brand .name{font-family:'Rounded Mplus 1c', sans-serif; font-weight:800}
    .search{flex:1; display:flex; align-items:center; gap:8px; padding:10px 12px; background:var(--pill); border:1px solid var(--line); border-radius:999px}
    .search input{flex:1; border:none; background:transparent; outline:none; font-size:14px}
    .actions{display:flex; gap:10px}
    .link{display:inline-flex; align-items:center; gap:6px; padding:10px 12px; border-radius:10px; border:1px solid var(--line); background:#fff; color:var(--ink-2); text-decoration:none; font-weight:700; font-size:13px}

    /* ======= Notice strip ======= */
    .notice{background:linear-gradient(90deg, #fff7f9, #fff); border-bottom:1px solid var(--line)}
    .notice .wrap{max-width:1200px; margin:0 auto; padding:8px 16px; color:#b24a5f; font-size:13px}

    /* ======= Hero ======= */
    .hero{border-bottom:1px solid var(--line)}
    .hero .wrap{max-width:1200px; margin:0 auto; padding:20px 16px}
    .banner{display:grid; grid-template-columns:1.4fr .6fr; gap:16px}
    @media (max-width:900px){.banner{grid-template-columns:1fr}}
    .bnr-main{position:relative; border-radius:var(--radius); overflow:hidden; background:linear-gradient(135deg, #ffe5ec, #fff)}
    .bnr-main .in{padding:24px 20px 80px}
    .eyebrow{color:#c74363; font-weight:900; letter-spacing:.12em; font-size:12px}
    .title{margin:6px 0; font-size:clamp(22px,4.6vw,34px); font-weight:900; line-height:1.2}
    .lead{color:var(--ink-2); font-size:14px}
    .bnr-main .cta{display:flex; gap:10px; margin-top:14px; flex-wrap:wrap}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:12px 16px; border-radius:999px; border:1px solid var(--line); background:#fff; color:#c74363; font-weight:900; cursor:pointer}
    .btn.primary{background:linear-gradient(90deg, var(--pink), var(--pink-2)); color:#fff; border-color:transparent}
    .bnr-side{display:grid; gap:16px}
    .sale{border-radius:var(--radius); background:linear-gradient(135deg, #fff1c6, #fff); padding:14px; border:1px solid var(--line)}
    .sale strong{color:#8c5a00}

    /* ======= Pinned chips ======= */
    .chips{max-width:1200px; margin:10px auto 0; padding:0 16px 16px; display:flex; gap:8px; flex-wrap:wrap}
    .chip{padding:10px 14px; border:1px solid var(--line); background:var(--pill); border-radius:999px; font-weight:700; font-size:13px; color:#c74363}

    /* ======= Main grid ======= */
    .grid{max-width:1200px; margin:0 auto; padding:16px; display:grid; grid-template-columns:1fr 1fr; gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow)}
    .card .hd{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--line)}
    .card .hd .ttl{font-weight:900; color:#c74363}
    .card .bd{padding:16px}

    /* Countdown card subcomponents */
    .kpi{display:flex; align-items:flex-end; gap:10px}
    .big{font-family:'Rounded Mplus 1c',sans-serif; font-weight:800; font-size:42px; color:#c74363}
    .muted{color:var(--ink-3); font-size:12px}
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    .pill{flex:1; min-width:160px; background:var(--pill); border:1px solid var(--line); border-radius:14px; padding:12px; text-align:center}
    .pill strong{color:#c74363}

    .stats{display:grid; grid-template-columns:repeat(3,1fr); gap:10px}
    .stat{background:var(--pill); border:1px solid var(--line); border-radius:14px; padding:12px; text-align:center}
    .stat .v{color:#c74363; font-weight:900}

    .note{margin-top:10px; border-left:4px solid var(--yellow); background:#fffdf4; padding:10px 12px; border-radius:12px}

    /* Checklist tabs + list (24028ã®ã‚«ãƒ†ã‚´ãƒª/ã‚°ãƒªãƒƒãƒ‰èª¿) */
    .tabs{display:flex; gap:8px; border-bottom:2px solid var(--line); padding:0 16px}
    .tabs button{appearance:none; background:none; border:none; padding:12px 14px; font-weight:900; color:var(--ink-2); border-bottom:3px solid transparent; cursor:pointer}
    .tabs button.active{color:#c74363; border-bottom-color:#ff9bbb}

    .list{padding:10px 0; display:grid; gap:12px}
    .group{border:1px solid var(--line); border-radius:14px; background:#fff}
    .group h4{margin:0; padding:12px 14px; border-bottom:1px dashed var(--line); color:#c74363}
    .item{display:flex; gap:10px; padding:12px 14px; align-items:flex-start; cursor:pointer}
    .item:hover{background:#fff7fb}
    .check{width:22px; height:22px; border-radius:50%; border:2px solid #ff7aa3; display:grid; place-items:center; color:#fff}
    .item[aria-checked="true"] .check{background:var(--mint); border-color:var(--mint)}
    .meta{font-size:12px; color:var(--ink-3)}

    .tools{display:flex; gap:8px; flex-wrap:wrap; padding:0 16px 10px}
    .btn.ghost{background:#fff; color:#c74363}

    /* Info list (24028ã®ã‚«ãƒ¼ãƒ‰ç¾¤ã‚¤ãƒ¡ãƒ¼ã‚¸) */
    .info-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:12px}
    @media (max-width:900px){.info-grid{grid-template-columns:1fr}}
    .info-card{border:1px solid var(--line); border-left:4px solid #ffd54d; background:#fffef6; border-radius:14px; padding:14px}
    .info-card h3{margin:0 0 6px 0; color:#8c5a00}

    /* Dialog */
    .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.4); z-index:50; padding:20px}
    .modal.show{display:flex}
    .sheet{width:min(520px,100%); background:#fff; border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow); overflow:hidden}
    .sheet-h{padding:12px 14px; background:#fff7fb; color:#c74363; font-weight:900}
    .sheet-b{padding:14px}
    .sheet-a{display:flex; gap:8px; padding:12px 14px; justify-content:flex-end; border-top:1px solid var(--line)}
    .field label{display:block; font-size:12px; color:var(--ink-3); margin-bottom:6px}
    .field input{width:100%; padding:12px; border:1px solid var(--line); border-radius:12px}

    /* Print */
    @media print{ .head,.notice,.hero,.chips,#home,.modal{display:none!important} #checklist{display:block!important} body{background:#fff}}

    a:focus-visible, button:focus-visible, input:focus-visible{box-shadow:var(--focus)}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="head" role="banner">
    <div class="wrap">
      <div class="brand"><div class="logo" aria-hidden="true"></div><div class="name">å‡ºç”£æº–å‚™ã‚¬ã‚¤ãƒ‰</div></div>
      <div class="search" role="search"><span aria-hidden="true">ğŸ”</span><input id="kw" placeholder="ä¾‹ï¼šå…ç«¥æ‰‹å½“ã€ãƒãƒ£ã‚¤ãƒ«ãƒ‰ã‚·ãƒ¼ãƒˆ"/></div>
      <div class="actions">
        <a class="link" href="#checklist">ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</a>
        <a class="link" href="#info">æƒ…å ±</a>
      </div>
    </div>
  </header>

  <!-- Notice -->
  <div class="notice"><div class="wrap">ãŠçŸ¥ã‚‰ã›ï¼šæƒ…å ±ã¯2026å¹´2æœˆæ™‚ç‚¹ã®ã‚‚ã®ã§ã™ã€‚æœ€æ–°ã¯å„çª“å£ã§ã”ç¢ºèªãã ã•ã„ã€‚</div></div>

  <!-- Hero -->
  <section class="hero" id="home" aria-label="ãƒ›ãƒ¼ãƒ ">
    <div class="wrap">
      <div class="banner">
        <div class="bnr-main">
          <div class="in">
            <div class="eyebrow">SAPPORO / GUIDE</div>
            <h1 class="title">å‡ºç”£äºˆå®šæ—¥ã‹ã‚‰é€†ç®—ã€‚<br/>ã‚„ã‚‹ã“ã¨ãƒ»è²·ã†ã‚‚ã®ã‚’è¿·ã‚ãšæº–å‚™ã€‚</h1>
            <p class="lead">äºˆå®šæ—¥ã‚’å…¥ã‚Œã‚‹ã ã‘ã§ã€æ®‹ã‚Šæ—¥æ•°ãƒ»é€±æ•°ãƒ»ä»Šé€±ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è‡ªå‹•è¡¨ç¤ºã€‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã¯ç«¯æœ«ã«ä¿å­˜ã§ãã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼å…±æœ‰ã‚‚å¯èƒ½ã§ã™ã€‚</p>
            <div class="cta">
              <button class="btn primary" id="btnDue">ğŸ“… äºˆå®šæ—¥ã‚’è¨­å®š</button>
              <button class="btn" id="jumpList">ğŸ“‹ ãƒªã‚¹ãƒˆã‚’é–‹ã</button>
            </div>
          </div>
        </div>
        <div class="bnr-side">
          <div class="sale"><strong>çµ¦ä»˜ãƒ»ç”³è«‹ã¾ã¨ã‚</strong><br/><span class="muted">å‡ºç”£å¾Œ15æ—¥ä»¥å†…ã®æ‰‹ç¶šãã¯å„ªå…ˆï¼</span></div>
          <div class="sale"><strong>æœ­å¹Œãƒã‚¤ãƒ³ãƒˆ</strong><br/><span class="muted">å†¬ã®é˜²å¯’ãƒ»åŠ æ¹¿ã‚±ã‚¢ãƒ»é›ªé“ãƒ™ãƒ“ãƒ¼ã‚«ãƒ¼</span></div>
        </div>
      </div>
    </div>
    <div class="chips">
      <div class="chip">å‡ºç”£ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³</div>
      <div class="chip">ä»Šé€±ã®æˆé•·</div>
      <div class="chip">ã‚¢ãƒ‰ãƒã‚¤ã‚¹</div>
      <div class="chip">ç”³è«‹æ‰‹ç¶šã</div>
      <div class="chip">æº–å‚™å“ãƒªã‚¹ãƒˆ</div>
    </div>
  </section>

  <main class="grid" aria-live="polite">
    <!-- Countdown / Growth -->
    <article class="card" aria-labelledby="c-ttl">
      <div class="hd"><div class="ttl" id="c-ttl">äºˆå®šæ—¥ã¾ã§ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³</div><button class="btn ghost" id="btnDue2">äºˆå®šæ—¥ã‚’å¤‰æ›´</button></div>
      <div class="bd">
        <div class="kpi"><div class="big" id="daysLeft">--</div><div class="muted" id="dueLabel">å‡ºç”£äºˆå®šæ—¥ã¾ã§</div></div>
        <div class="row">
          <div class="pill"><div class="muted">ç¾åœ¨</div><strong id="currentWeek">--é€±--æ—¥</strong></div>
          <div class="pill"><div class="muted">äºˆå®šæ—¥</div><strong id="dueDate">--/--</strong></div>
        </div>
        <hr style="border:none; border-top:1px solid var(--line); margin:14px 0"/>
        <div class="stats">
          <div class="stat"><div class="muted">å¤§ãã•</div><div class="v" id="babySize">--cm</div></div>
          <div class="stat"><div class="muted">ä½“é‡</div><div class="v" id="babyWeight">--g</div></div>
          <div class="stat"><div class="muted">é€±æ•°</div><div class="v" id="wk">--é€±</div></div>
        </div>
        <div class="note">
          <strong>ä»Šé€±ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹</strong>
          <ul id="adviceList" style="margin:6px 0 0 1em; padding:0"></ul>
        </div>
      </div>
    </article>

    <!-- Checklist -->
    <article class="card" id="checklist" aria-labelledby="l-ttl">
      <div class="hd"><div class="ttl" id="l-ttl">ç”³è«‹ãƒ»æº–å‚™ãƒªã‚¹ãƒˆ</div><div class="muted" id="progress">é€²æ— --%</div></div>
      <div class="bd">
        <div class="tabs" role="tablist">
          <button class="active" data-tab="applications" aria-selected="true">ç”³è«‹æ‰‹ç¶šã</button>
          <button data-tab="preparation" aria-selected="false">å‡ºç”£æº–å‚™</button>
        </div>
        <div class="tools">
          <button class="btn ghost" id="btnExport">â¬‡ï¸ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
          <button class="btn ghost" id="btnImport">â¬†ï¸ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
          <input class="sr-only" type="file" id="fileImport" accept="application/json"/>
          <button class="btn ghost" id="btnShare">ğŸ”— å…±æœ‰ãƒªãƒ³ã‚¯</button>
          <button class="btn ghost" id="btnReset">ãƒªã‚»ãƒƒãƒˆ</button>
        </div>
        <div id="tabContent" class="list"></div>
      </div>
    </article>

    <!-- Info -->
    <article class="card" id="info" aria-labelledby="i-ttl">
      <div class="hd"><div class="ttl" id="i-ttl">æƒ…å ±ãƒ»å•ã„åˆã‚ã›</div></div>
      <div class="bd">
        <div class="info-grid">
          <div class="info-card"><h3>ä¸»ãªå•ã„åˆã‚ã›å…ˆ</h3><div>æœ­å¹Œå¸‚å¦Šå©¦æ”¯æ´çµ¦ä»˜ã‚³ãƒ¼ãƒ«ã‚»ãƒ³ã‚¿ãƒ¼</div><div style="margin-top:6px"><a class="btn primary" href="tel:0112130383">ğŸ“± 011-213-0383</a></div></div>
          <div class="info-card"><h3>çµ¦ä»˜é‡‘ãƒ»åŠ©æˆé‡‘</h3><ul style="margin:0; padding-left:1.2em; line-height:1.8"><li>å¦Šå©¦ã®ãŸã‚ã®æ”¯æ´çµ¦ä»˜ï¼šè¨ˆ10ä¸‡å††</li><li>å‡ºç”£è‚²å…ä¸€æ™‚é‡‘ï¼š50ä¸‡å††</li><li>å…ç«¥æ‰‹å½“ï¼šæœˆ15,000å††ã€œ</li><li>å­ã©ã‚‚åŒ»ç™‚è²»åŠ©æˆï¼š18æ­³ã¾ã§</li></ul></div>
          <div class="info-card"><h3>æœ­å¹Œãªã‚‰ã§ã¯</h3><ul style="margin:0; padding-left:1.2em; line-height:1.8"><li>å†¬ã®é˜²å¯’å¯¾ç­–ï¼ˆ10ã€œ4æœˆï¼‰</li><li>åŠ æ¹¿ã¨ä¿æ¹¿ã‚±ã‚¢</li><li>é›ªé“å¯¾å¿œãƒ™ãƒ“ãƒ¼ã‚«ãƒ¼</li></ul></div>
        </div>
      </div>
    </article>
  </main>

  <!-- Due Date Modal -->
  <div class="modal" id="dlg" role="dialog" aria-modal="true" aria-labelledby="dlgTitle">
    <div class="sheet" role="document">
      <div class="sheet-h" id="dlgTitle">ğŸ“… å‡ºç”£äºˆå®šæ—¥ã®è¨­å®š</div>
      <div class="sheet-b">
        <div class="field"><label for="inpDate">å‡ºç”£äºˆå®šæ—¥</label><input type="date" id="inpDate"/></div>
      </div>
      <div class="sheet-a">
        <button class="btn" id="btnCancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="btn primary" id="btnSave">ä¿å­˜</button>
      </div>
    </div>
  </div>

  <script>
    const APP_VERSION = '4.0.0-24028';
    const STORAGE = { DUE:'v24028_due', CHECK:'v24028_check' };
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    // Header search filters checklist titles/descriptions
    $('#kw').addEventListener('input', ()=> renderList());

    // CTA
    $('#btnDue').addEventListener('click', openDlg);
    $('#btnDue2').addEventListener('click', openDlg);
    $('#jumpList').addEventListener('click', ()=> document.querySelector('#checklist').scrollIntoView({behavior:'smooth'}));

    // Dialog
    function openDlg(){
      const el=$('#inpDate'); const today=new Date();
      const min=new Date(today.getTime()-7*24*3600*1000*45);
      const max=new Date(today.getTime()+7*24*3600*1000*45);
      const fmt=d=>`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
      el.min=fmt(min); el.max=fmt(max); el.value=localStorage.getItem(STORAGE.DUE)||fmt(today);
      $('#dlg').classList.add('show'); setTimeout(()=>el.focus(),20);
    }
    function closeDlg(){ $('#dlg').classList.remove('show'); }
    $('#btnCancel').addEventListener('click', closeDlg);
    $('#btnSave').addEventListener('click', ()=>{ const v=$('#inpDate').value; if(!v) return; localStorage.setItem(STORAGE.DUE, v); closeDlg(); updateAll(v); });

    // Data
    const DATA={
      applications:[
        {g:'å¦Šå¨ ãŒã‚ã‹ã£ãŸã‚‰', items:[
          {id:'app-1', title:'å¦Šå¨ å±Šå‡ºï¼ˆæ¯å­å¥åº·æ‰‹å¸³ï¼‰', desc:'åŒºä¿å¥ã‚»ãƒ³ã‚¿ãƒ¼ã§äº¤ä»˜'},
          {id:'app-2', title:'å¦Šå©¦æ”¯æ´çµ¦ä»˜ï¼ˆ1å›ç›®ï¼‰', desc:'5ä¸‡å††æ”¯çµ¦'}
        ]},
        {g:'å‡ºç”£äºˆå®šæ—¥ã®8é€±å‰', items:[
          {id:'app-3', title:'å¦Šå©¦æ”¯æ´çµ¦ä»˜ï¼ˆ2å›ç›®ï¼‰', desc:'5ä¸‡å††æ”¯çµ¦'},
          {id:'app-4', title:'ç”£ä¼‘ç”³è«‹ï¼ˆä¼šç¤¾å“¡ï¼‰', desc:'å‹¤å‹™å…ˆã¸ç”³è«‹'}
        ]},
        {g:'âš ï¸ å‡ºç”£å¾Œã™ãï¼ˆ15æ—¥ä»¥å†…ï¼‰', items:[
          {id:'app-5', title:'å‡ºç”Ÿå±Š', desc:'14æ—¥ä»¥å†…å¿…é ˆ'},
          {id:'app-6', title:'å…ç«¥æ‰‹å½“', desc:'15æ—¥ä»¥å†…å¿…é ˆï¼é…ã‚Œã‚‹ã¨å—çµ¦é–‹å§‹ãŒé…ã‚Œã¾ã™'},
          {id:'app-7', title:'å­ã©ã‚‚åŒ»ç™‚è²»åŠ©æˆ', desc:'ã§ãã‚‹ã ã‘æ—©ãç”³è«‹'},
          {id:'app-8', title:'å¥åº·ä¿é™ºåŠ å…¥', desc:'å‹¤å‹™å…ˆã¾ãŸã¯åŒºå½¹æ‰€'},
          {id:'app-9', title:'å‡ºç”£è‚²å…ä¸€æ™‚é‡‘', desc:'50ä¸‡å††æ”¯çµ¦'}
        ]},
        {g:'ç”£å¾Œ1ã€œ2ãƒ¶æœˆ', items:[
          {id:'app-10', title:'å‡ºç”£æ‰‹å½“é‡‘', desc:'æ—¥çµ¦ã®ç´„2/3Ã—98æ—¥åˆ†'},
          {id:'app-11', title:'å›½æ°‘å¹´é‡‘ä¿é™ºæ–™å…é™¤', desc:'ç”£å‰ç”£å¾Œ4ãƒ¶æœˆåˆ†'}
        ]},
        {g:'è‚²ä¼‘é–‹å§‹å‰', items:[
          {id:'app-12', title:'è‚²ä¼‘ç”³è«‹', desc:'å‹¤å‹™å…ˆã¸1ãƒ¶æœˆå‰ã¾ã§ã«'},
          {id:'app-13', title:'è‚²å…ä¼‘æ¥­çµ¦ä»˜é‡‘', desc:'æœ€åˆ180æ—¥:67%ã€ä»¥é™:50%'}
        ]}
      ],
      preparation:[
        {g:'ğŸ‘© ãƒãƒç”¨å“', items:[
          {id:'prep-1', title:'ç”£è¤¥ã‚·ãƒ§ãƒ¼ãƒ„', badge:'å¿…é ˆ'},
          {id:'prep-2', title:'æˆä¹³ãƒ–ãƒ©', badge:'å¿…é ˆ'},
          {id:'prep-3', title:'æ¯ä¹³ãƒ‘ãƒƒãƒ‰', badge:'å¿…é ˆ'},
          {id:'prep-4', title:'æˆä¹³ã‚¯ãƒƒã‚·ãƒ§ãƒ³', badge:'æ¨å¥¨'}
        ]},
        {g:'ğŸ‘¶ èµ¤ã¡ã‚ƒã‚“è¡£é¡', items:[
          {id:'prep-10', title:'çŸ­è‚Œç€ï¼ˆ5ã€œ6æšï¼‰', badge:'å¿…é ˆ'},
          {id:'prep-11', title:'ã‚³ãƒ³ãƒ“è‚Œç€ï¼ˆ5ã€œ6æšï¼‰', badge:'å¿…é ˆ'},
          {id:'prep-12', title:'é˜²å¯’ç€ãƒ»ã‚¸ãƒ£ãƒ³ãƒ—ã‚¹ãƒ¼ãƒ„', badge:'å¿…é ˆ'}
        ]},
        {g:'ğŸ¼ æˆä¹³ãƒ»èª¿ä¹³ç”¨å“', items:[
          {id:'prep-20', title:'å“ºä¹³ç“¶', badge:'å¿…é ˆ'},
          {id:'prep-21', title:'ç²‰ãƒŸãƒ«ã‚¯', badge:'æ¨å¥¨'}
        ]},
        {g:'ğŸš— ãŠå‡ºã‹ã‘ç”¨å“', items:[
          {id:'prep-30', title:'ãƒãƒ£ã‚¤ãƒ«ãƒ‰ã‚·ãƒ¼ãƒˆ', badge:'å¿…é ˆ'},
          {id:'prep-31', title:'ãƒ™ãƒ“ãƒ¼ã‚«ãƒ¼', badge:'å¿…é ˆ'},
          {id:'prep-32', title:'æŠ±ã£ã“ç´', badge:'å¿…é ˆ'}
        ]}
      ]
    };

    const ADVICE={ 0:['ç„¡ç†ã›ãšä¼‘æ¯ã‚’ã€‚ä½“èª¿ã«åˆã‚ã›ã¦éã”ã—ã¾ã—ã‚‡ã†','è‘‰é…¸ãªã©å¿…è¦ãªæ „é¤Šã‚’æ„è­˜ã—ã¦æ‘‚ã‚Šã¾ã—ã‚‡ã†'], 8:['ã¤ã‚ã‚Šã®ãƒ”ãƒ¼ã‚¯æ™‚æœŸã€‚åŒ‚ã„ãƒ»æ™‚é–“å¸¯ã®å·¥å¤«ã§è»½æ¸›ã‚’','æ¯å­æ‰‹å¸³ã‚’å—ã‘å–ã‚Šã¾ã—ã‚‡ã†'], 16:['å®‰å®šæœŸã«ã€‚é©åº¦ãªé‹å‹•ã‚’å§‹ã‚ã¾ã—ã‚‡ã†','æ­¯ç§‘æ¤œè¨ºã‚’å—ã‘ã¾ã—ã‚‡ã†','æˆŒã®æ—¥ã®å®‰ç”£ç¥ˆé¡˜ã‚’æ¤œè¨'], 24:['ä½“é‡ç®¡ç†ã«æ°—ã‚’ã¤ã‘ã¾ã—ã‚‡ã†','å¦Šå¨ ç·šäºˆé˜²ã‚±ã‚¢ã‚’é–‹å§‹','ãƒ™ãƒ“ãƒ¼ç”¨å“ã®æº–å‚™ã‚’é–‹å§‹'], 32:['å‡ºç”£æº–å‚™å“ãƒªã‚¹ãƒˆã‚’ä½œæˆ','é‡Œå¸°ã‚Šå‡ºç”£ã®å ´åˆã¯ç§»å‹•æ™‚æœŸã®æ¤œè¨','ç”£å¾Œã®æ‰‹ç¶šãã‚’ç¢ºèª'], 36:['å…¥é™¢ãƒãƒƒã‚°ã®æº–å‚™å®Œäº†ã‚’','é™£ç—›ã‚¿ã‚¯ã‚·ãƒ¼ç™»éŒ²','ãƒãƒ¼ã‚¹ãƒ—ãƒ©ãƒ³ã‚’è©±ã—åˆã„ã¾ã—ã‚‡ã†'], 40:['å‡ºç”£æº–å‚™ã¯ä¸‡å…¨ã«ã€‚ç„¦ã‚‰ãšä½“ã‚’ä¼‘ã‚ã¾ã—ã‚‡ã†'] };

    const GROWTH={ 8:{size:'1.6cm',weight:'1g'}, 12:{size:'6cm',weight:'14g'}, 16:{size:'12cm',weight:'100g'}, 20:{size:'25cm',weight:'300g'}, 24:{size:'30cm',weight:'600g'}, 28:{size:'37cm',weight:'1000g'}, 32:{size:'42cm',weight:'1700g'}, 36:{size:'47cm',weight:'2500g'}, 40:{size:'50cm',weight:'3200g'} };

    // List rendering with keyword filter
    function renderList(){
      const content=$('#tabContent');
      const tabs=document.querySelector('.tabs');
      const active=tabs.querySelector('button.active');
      const key=active?.dataset.tab||'applications';
      const kw=($('#kw').value||'').trim();
      const data=DATA[key];
      const progress=JSON.parse(localStorage.getItem(STORAGE.CHECK)||'{}');

      tabs.onclick=(e)=>{ const b=e.target.closest('button'); if(!b||b.classList.contains('active')) return; tabs.querySelectorAll('button').forEach(x=>{x.classList.toggle('active', x===b); x.setAttribute('aria-selected', x===b?'true':'false')}); renderList(); };

      content.innerHTML='';
      for(const grp of data){
        const matched=grp.items.filter(it=> !kw || it.title.includes(kw) || (it.desc||'').includes(kw));
        if(matched.length===0) continue;
        const g=document.createElement('section'); g.className='group';
        const h=document.createElement('h4'); h.textContent=grp.g; g.appendChild(h);
        for(const it of matched){
          const item=document.createElement('div'); item.className='item'; item.setAttribute('role','checkbox'); item.dataset.id=it.id;
          const checked=!!progress[it.id]; item.setAttribute('aria-checked', String(checked));
          item.innerHTML=`<div class="check">${checked?'âœ“':''}</div><div><div><strong>${it.title}</strong>${it.badge?` <span style="display:inline-block; padding:2px 8px; background:#ff7aa3; color:#fff; border-radius:999px; font-size:11px; margin-left:6px">${it.badge}</span>`:''}</div>${it.desc?`<div class="meta">${it.desc}</div>`:''}</div>`;
          item.addEventListener('click',()=>{ const now=item.getAttribute('aria-checked')==='true'; item.setAttribute('aria-checked', String(!now)); item.querySelector('.check').textContent=!now?'âœ“':''; progress[it.id]=!now; localStorage.setItem(STORAGE.CHECK, JSON.stringify(progress)); updateProgress(); });
          g.appendChild(item);
        }
        content.appendChild(g);
      }
      updateProgress();
    }

    function updateProgress(){ const total=$$('#tabContent .item').length||1; const done=$$('#tabContent .item[aria-checked="true"]').length; const pct=Math.round(done/total*100); $('#progress').textContent=`é€²æ— ${pct}%`; }

    // Countdown etc.
    function updateAll(dueStr){
      let due = dueStr ? new Date(dueStr) : new Date(localStorage.getItem(STORAGE.DUE)||'');
      if(!due || isNaN(+due)) return;
      const today=new Date(); today.setHours(0,0,0,0); due.setHours(0,0,0,0);
      const diff=due - today; const daysLeft=Math.ceil(diff / (1000*60*60*24));
      const TOTAL=280; let elapsed=TOTAL - daysLeft; if(elapsed<0) elapsed=0; if(elapsed>TOTAL) elapsed=TOTAL;
      const weeks=Math.floor(elapsed/7), days=elapsed%7;

      $('#dueDate').textContent=(due.getMonth()+1)+'/'+due.getDate();
      if(daysLeft>0){ $('#daysLeft').textContent=`${daysLeft}æ—¥`; $('#dueLabel').textContent='å‡ºç”£äºˆå®šæ—¥ã¾ã§'; }
      else if(daysLeft===0){ $('#daysLeft').textContent='ãã‚‡ã†ï¼'; $('#dueLabel').textContent='å‡ºç”£äºˆå®šæ—¥'; }
      else { $('#daysLeft').textContent='èª•ç”Ÿï¼'; $('#dueLabel').textContent=`å‡ºç”£ã‹ã‚‰ ${Math.abs(daysLeft)}æ—¥`; }
      $('#currentWeek').textContent=`${weeks}é€±${days}æ—¥`; $('#wk').textContent=`${weeks}é€±`;

      let cur=8; for(const w of Object.keys(GROWTH).map(Number).sort((a,b)=>a-b)) if(weeks>=w) cur=w; if(weeks>=40) cur=40;
      $('#babySize').textContent=GROWTH[cur].size; $('#babyWeight').textContent=GROWTH[cur].weight;

      let adv=ADVICE[0]; for(const w of Object.keys(ADVICE).map(Number).sort((a,b)=>a-b)) if(weeks>=w) adv=ADVICE[w];
      $('#adviceList').innerHTML=adv.map(x=>`<li>${x}</li>`).join('');
    }

    // Export / Import / Share
    $('#btnExport').addEventListener('click', ()=>{
      const data={version:APP_VERSION, dueDate: localStorage.getItem(STORAGE.DUE)||null, checklist: JSON.parse(localStorage.getItem(STORAGE.CHECK)||'{}'), exportedAt:new Date().toISOString()};
      const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'}); const url=URL.createObjectURL(blob);
      const a=document.createElement('a'); a.href=url; a.download=`pregnancy_24028_${new Date().toISOString().slice(0,10)}.json`; a.click(); URL.revokeObjectURL(url);
    });
    $('#btnImport').addEventListener('click', ()=> $('#fileImport').click());
    $('#fileImport').addEventListener('change', (e)=>{ const f=e.target.files?.[0]; e.target.value=''; if(!f) return; const r=new FileReader(); r.onload=()=>{ try{ const obj=JSON.parse(r.result); if(obj?.dueDate) localStorage.setItem(STORAGE.DUE, obj.dueDate); if(obj?.checklist) localStorage.setItem(STORAGE.CHECK, JSON.stringify(obj.checklist)); if(obj?.dueDate) updateAll(obj.dueDate); renderList(); alert('ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚'); }catch{ alert('èª­ã¿è¾¼ã¿å¤±æ•—ã€‚JSONã‚’ã”ç¢ºèªãã ã•ã„ã€‚') } }; r.readAsText(f, 'utf-8'); });
    $('#btnShare').addEventListener('click', ()=>{ const payload={v:APP_VERSION, dueDate: localStorage.getItem(STORAGE.DUE)||null, checklist: JSON.parse(localStorage.getItem(STORAGE.CHECK)||'{}')}; const s=encodeURIComponent(btoa(unescape(encodeURIComponent(JSON.stringify(payload))))); const link=location.origin+location.pathname+'#data='+s; navigator.clipboard.writeText(link).then(()=> alert('å…±æœ‰ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ')); });

    // Deep-link import
    (function importFromHash(){ const m=location.hash.match(/#data([=].*)/); if(!m) return; try{ const json=decodeURIComponent(escape(atob(decodeURIComponent(m[1].slice(1))))); const obj=JSON.parse(json); if(obj?.dueDate) localStorage.setItem(STORAGE.DUE,obj.dueDate); if(obj?.checklist) localStorage.setItem(STORAGE.CHECK, JSON.stringify(obj.checklist)); if(obj?.dueDate) updateAll(obj.dueDate); location.hash=''; }catch(e){} })();

    // Init
    (function init(){ if(localStorage.getItem(STORAGE.DUE)) updateAll(); renderList(); })();
  </script>
</body>
</html>
